var rough=function(){"use strict";function e(){return{LEFT:0,RIGHT:1,INTERSECTS:2,AHEAD:3,BEHIND:4,SEPARATE:5,UNDEFINED:6}}var t=Math.pow,n=Math.cos,a=Math.sin,i=Math.PI,l=Math.sqrt,s=Math.max,r=Math.min,p=Math.abs,o=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(s,i){try{var o=t[s](i),l=o.value}catch(e){return void n(e)}return o.done?void e(l):Promise.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}},f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},d=function(){function e(e,t){for(var n,a=0;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),g=function(){function t(a,s,i,o){f(this,t),this.RoughSegmentRelationConst=e(),this.px1=a,this.py1=s,this.px2=i,this.py2=o,this.xi=n,this.yi=n,this.a=o-s,this.b=a-i,this.c=i*s-a*o,this._undefined=0==this.a&&0==this.b&&0==this.c}var n=Number.MAX_VALUE;return d(t,[{key:"isUndefined",value:function(){return this._undefined}},{key:"compare",value:function(e){if(this.isUndefined()||e.isUndefined())return this.RoughSegmentRelationConst.UNDEFINED;var t=n,i=n,o=0,l=0,f=this.a,d=this.b,g=this.c;return(1e-5<p(d)&&(t=-f/d,o=-g/d),1e-5<p(e.b)&&(i=-e.a/e.b,l=-e.c/e.b),t==n)?i==n?-g/f==-e.c/e.a?this.py1>=r(e.py1,e.py2)&&this.py1<=s(e.py1,e.py2)?(this.xi=this.px1,this.yi=this.py1,this.RoughSegmentRelationConst.INTERSECTS):this.py2>=r(e.py1,e.py2)&&this.py2<=s(e.py1,e.py2)?(this.xi=this.px2,this.yi=this.py2,this.RoughSegmentRelationConst.INTERSECTS):this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.SEPARATE:(this.xi=this.px1,this.yi=i*this.xi+l,-1e-5>(this.py1-this.yi)*(this.yi-this.py2)||-1e-5>(e.py1-this.yi)*(this.yi-e.py2)?this.RoughSegmentRelationConst.SEPARATE:1e-5>p(e.a)?-1e-5>(e.px1-this.xi)*(this.xi-e.px2)?this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.INTERSECTS:this.RoughSegmentRelationConst.INTERSECTS):i==n?(this.xi=e.px1,this.yi=t*this.xi+o,-1e-5>(e.py1-this.yi)*(this.yi-e.py2)||-1e-5>(this.py1-this.yi)*(this.yi-this.py2)?this.RoughSegmentRelationConst.SEPARATE:1e-5>p(f)?-1e-5>(this.px1-this.xi)*(this.xi-this.px2)?this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.INTERSECTS:this.RoughSegmentRelationConst.INTERSECTS):t==i?o==l?this.px1>=r(e.px1,e.px2)&&this.px1<=s(e.py1,e.py2)?(this.xi=this.px1,this.yi=this.py1,this.RoughSegmentRelationConst.INTERSECTS):this.px2>=r(e.px1,e.px2)&&this.px2<=s(e.px1,e.px2)?(this.xi=this.px2,this.yi=this.py2,this.RoughSegmentRelationConst.INTERSECTS):this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.SEPARATE:(this.xi=(l-o)/(t-i),this.yi=t*this.xi+o,-1e-5>(this.px1-this.xi)*(this.xi-this.px2)||-1e-5>(e.px1-this.xi)*(this.xi-e.px2)?this.RoughSegmentRelationConst.SEPARATE:this.RoughSegmentRelationConst.INTERSECTS)}},{key:"getLength",value:function(){return this._getLength(this.px1,this.py1,this.px2,this.py2)}},{key:"_getLength",value:function(e,t,n,a){var s=n-e,i=a-t;return l(s*s+i*i)}}]),t}(),h=function(){function t(e,n,a,s,i,o,l,r){f(this,t),this.top=e,this.bottom=n,this.left=a,this.right=s,this.gap=i,this.sinAngle=o,this.tanAngle=r,1e-4>p(o)?this.pos=a+i:.9999<p(o)?this.pos=e+i:(this.deltaX=(n-e)*p(r),this.pos=a-p(this.deltaX),this.hGap=p(i/l),this.sLeft=new g(a,n,a,e),this.sRight=new g(s,n,s,e))}return d(t,[{key:"getNextLine",value:function(){if(1e-4>p(this.sinAngle)){if(this.pos<this.right){var t=[this.pos,this.top,this.pos,this.bottom];return this.pos+=this.gap,t}}else if(!(.9999<p(this.sinAngle))){var n=this.pos-this.deltaX/2,a=this.pos+this.deltaX/2,i=this.bottom,o=this.top;if(this.pos<this.right+this.deltaX){for(;n<this.left&&a<this.left||n>this.right&&a>this.right;)if(this.pos+=this.hGap,n=this.pos-this.deltaX/2,a=this.pos+this.deltaX/2,this.pos>this.right+this.deltaX)return null;var l=new g(n,i,a,o);l.compare(this.sLeft)==e().INTERSECTS&&(n=l.xi,i=l.yi),l.compare(this.sRight)==e().INTERSECTS&&(a=l.xi,o=l.yi),0<this.tanAngle&&(n=this.right-(n-this.left),a=this.right-(a-this.left));var s=[n,i,a,o];return this.pos+=this.hGap,s}}else if(this.pos<this.bottom){var r=[this.left,this.pos,this.right,this.pos];return this.pos+=this.gap,r}return null}}]),t}(),_=function(){function e(t,n){f(this,e),this.type=t,this.text=n}return d(e,[{key:"isType",value:function(e){return this.type===e}}]),e}(),u=function(){function e(t){f(this,e),this.PARAMS={A:["rx","ry","x-axis-rotation","large-arc-flag","sweep-flag","x","y"],a:["rx","ry","x-axis-rotation","large-arc-flag","sweep-flag","x","y"],C:["x1","y1","x2","y2","x","y"],c:["x1","y1","x2","y2","x","y"],H:["x"],h:["x"],L:["x","y"],l:["x","y"],M:["x","y"],m:["x","y"],Q:["x1","y1","x","y"],q:["x1","y1","x","y"],S:["x2","y2","x","y"],s:["x2","y2","x","y"],T:["x","y"],t:["x","y"],V:["y"],v:["y"],Z:[],z:[]},this.COMMAND=0,this.NUMBER=1,this.EOD=2,this.segments=[],this.d=t||"",this.parseData(t),this.processPoints()}return d(e,[{key:"loadFromSegments",value:function(e){this.segments=e,this.processPoints()}},{key:"processPoints",value:function(){for(var e,t=null,n=[0,0],a=0;a<this.segments.length;a++){switch(e=this.segments[a],e.key){case"M":case"L":case"T":e.point=[e.data[0],e.data[1]];break;case"m":case"l":case"t":e.point=[e.data[0]+n[0],e.data[1]+n[1]];break;case"H":e.point=[e.data[0],n[1]];break;case"h":e.point=[e.data[0]+n[0],n[1]];break;case"V":e.point=[n[0],e.data[0]];break;case"v":e.point=[n[0],e.data[0]+n[1]];break;case"z":case"Z":t&&(e.point=[t[0],t[1]]);break;case"C":e.point=[e.data[4],e.data[5]];break;case"c":e.point=[e.data[4]+n[0],e.data[5]+n[1]];break;case"S":e.point=[e.data[2],e.data[3]];break;case"s":e.point=[e.data[2]+n[0],e.data[3]+n[1]];break;case"Q":e.point=[e.data[2],e.data[3]];break;case"q":e.point=[e.data[2]+n[0],e.data[3]+n[1]];break;case"A":e.point=[e.data[5],e.data[6]];break;case"a":e.point=[e.data[5]+n[0],e.data[6]+n[1]];}("m"===e.key||"M"===e.key)&&(t=null),e.point&&(n=e.point,!t&&(t=e.point)),("z"===e.key||"Z"===e.key)&&(t=null)}}},{key:"parseData",value:function(e){var t=this.tokenize(e),n=0,a=t[n],s="BOD";for(this.segments=[];!a.isType(this.EOD);){var o,l=[];if("BOD"!=s)a.isType(this.NUMBER)?o=this.PARAMS[s].length:(n++,o=this.PARAMS[a.text].length,s=a.text);else if("M"==a.text||"m"==a.text)n++,o=this.PARAMS[a.text].length,s=a.text;else return this.parseData("M0,0"+e);if(n+o<t.length){for(var r,p=n;p<n+o;p++)if(r=t[p],r.isType(this.NUMBER))l[l.length]=r.text;else return void console.error("Parameter type is not a number: "+s+","+r.text);var i;if(this.PARAMS[s])i={key:s,data:l};else return void console.error("Unsupported segment type: "+s);this.segments.push(i),n+=o,a=t[n],"M"==s&&(s="L"),"m"==s&&(s="l")}else console.error("Path data ended before all parameters were found")}}},{key:"tokenize",value:function(e){for(var t=[];""!=e;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]=new _(this.COMMAND,RegExp.$1),e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]=new _(this.NUMBER,parseFloat(RegExp.$1)),e=e.substr(RegExp.$1.length);else return console.error("Unrecognized segment command: "+e),null;return t[t.length]=new _(this.EOD,null),t}},{key:"closed",get:function(){if("undefined"==typeof this._closed){this._closed=!1;var e,t=!0,n=!1;try{for(var a,i,s=this.segments[Symbol.iterator]();!(t=(a=s.next()).done);t=!0)i=a.value,"z"===i.key.toLowerCase()&&(this._closed=!0)}catch(t){n=!0,e=t}finally{try{!t&&s.return&&s.return()}finally{if(n)throw e}}}return this._closed}}]),e}(),y=function(){function e(t){f(this,e),this.d=t,this.parsed=new u(t),this._position=[0,0],this.bezierReflectionPoint=null,this.quadReflectionPoint=null,this._first=null}return d(e,[{key:"setPosition",value:function(e,t){this._position=[e,t],this._first||(this._first=[e,t])}},{key:"segments",get:function(){return this.parsed.segments}},{key:"closed",get:function(){return this.parsed.closed}},{key:"linearPoints",get:function(){if(!this._linearPoints){var e,t=[],n=[],a=!0,i=!1;try{for(var o,l=this.parsed.segments[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value,s=r.key.toLowerCase();("m"===s||"z"===s)&&(n.length&&(t.push(n),n=[]),"z"===s)||r.point&&n.push(r.point)}}catch(t){i=!0,e=t}finally{try{!a&&l.return&&l.return()}finally{if(i)throw e}}n.length&&(t.push(n),n=[]),this._linearPoints=t}return this._linearPoints}},{key:"first",get:function(){return this._first},set:function(e){this._first=e}},{key:"position",get:function(){return this._position}},{key:"x",get:function(){return this._position[0]}},{key:"y",get:function(){return this._position[1]}}]),e}(),c=function(){function e(t,o,r,d,g,h){f(this,e);var _=i/180;if(this._segIndex=0,this._numSegs=0,t[0]!=o[0]||t[1]!=o[1]){this._rx=p(r[0]),this._ry=p(r[1]),this._sinPhi=a(d*_),this._cosPhi=n(d*_);var u,y=this._cosPhi*(t[0]-o[0])/2+this._sinPhi*(t[1]-o[1])/2,c=-this._sinPhi*(t[0]-o[0])/2+this._cosPhi*(t[1]-o[1])/2,x=this._rx*this._rx*this._ry*this._ry-this._rx*this._rx*c*c-this._ry*this._ry*y*y;if(0>x){var v=l(1-x/(this._rx*this._rx*this._ry*this._ry));this._rx=v,this._ry=v,u=0}else u=(g==h?-1:1)*l(x/(this._rx*this._rx*c*c+this._ry*this._ry*y*y));var s=u*this._rx*c/this._ry,m=-u*this._ry*y/this._rx;this._C=[0,0],this._C[0]=this._cosPhi*s-this._sinPhi*m+(t[0]+o[0])/2,this._C[1]=this._sinPhi*s+this._cosPhi*m+(t[1]+o[1])/2,this._theta=this.calculateVectorAngle(1,0,(y-s)/this._rx,(c-m)/this._ry);var k=this.calculateVectorAngle((y-s)/this._rx,(c-m)/this._ry,(-y-s)/this._rx,(-c-m)/this._ry);!h&&0<k?k-=2*i:h&&0>k&&(k+=2*i),this._numSegs=Math.ceil(p(k/(i/2))),this._delta=k/this._numSegs,this._T=8/3*a(this._delta/4)*a(this._delta/4)/a(this._delta/2),this._from=t}}return d(e,[{key:"getNextSegment",value:function(){var e,t,s;if(this._segIndex==this._numSegs)return null;var i=n(this._theta),o=a(this._theta),l=this._theta+this._delta,r=n(l),p=a(l);return s=[this._cosPhi*this._rx*r-this._sinPhi*this._ry*p+this._C[0],this._sinPhi*this._rx*r+this._cosPhi*this._ry*p+this._C[1]],e=[this._from[0]+this._T*(-this._cosPhi*this._rx*o-this._sinPhi*this._ry*i),this._from[1]+this._T*(-this._sinPhi*this._rx*o+this._cosPhi*this._ry*i)],t=[s[0]+this._T*(this._cosPhi*this._rx*p+this._sinPhi*this._ry*r),s[1]+this._T*(this._sinPhi*this._rx*p-this._cosPhi*this._ry*r)],this._theta=l,this._from=[s[0],s[1]],this._segIndex++,{cp1:e,cp2:t,to:s}}},{key:"calculateVectorAngle",value:function(e,t,n,a){var s=Math.atan2,o=s(t,e),l=s(a,n);return l>=o?l-o:2*i-(o-l)}}]),e}(),x=function(){function e(t,n){f(this,e),this.sets=t,this.closed=n}return d(e,[{key:"fit",value:function(e){var t,n=[],a=!0,s=!1;try{for(var o,l=this.sets[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value,p=r.length,f=Math.floor(e*p);if(5>f){if(5>=p)continue;f=5}n.push(this.reduce(r,f))}}catch(e){s=!0,t=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw t}}var g,h="",d=!0,_=!1;try{for(var u,y,c=n[Symbol.iterator]();!(d=(u=c.next()).done);d=!0){y=u.value;for(var x,v=0;v<y.length;v++)x=y[v],h+=0===v?"M"+x[0]+","+x[1]:"L"+x[0]+","+x[1];this.closed&&(h+="z ")}}catch(e){_=!0,g=e}finally{try{!d&&c.return&&c.return()}finally{if(_)throw g}}return h}},{key:"distance",value:function(e,n){return l(t(e[0]-n[0],2)+t(e[1]-n[1],2))}},{key:"reduce",value:function(e,t){if(e.length<=t)return e;for(var n=e.slice(0);n.length>t;){for(var o=-1,r=-1,p=1;p<n.length-1;p++){var i=this.distance(n[p-1],n[p]),a=this.distance(n[p],n[p+1]),f=this.distance(n[p-1],n[p+1]),d=(i+a+f)/2,s=l(d*(d-i)*(d-a)*(d-f));(0>o||s<o)&&(o=s,r=p)}if(0<r)n.splice(r,1);else break}return n}}]),e}(),v=function(){function o(){f(this,o)}var _=Math.tan;return d(o,[{key:"line",value:function(e,t,n,a,s){var i=this._doubleLine(e,t,n,a,s);return{type:"path",ops:i}}},{key:"linearPath",value:function(e,t,n){var a=(e||[]).length;if(2<a){for(var s=[],o=0;o<a-1;o++)s=s.concat(this._doubleLine(e[o][0],e[o][1],e[o+1][0],e[o+1][1],n));return t&&(s=s.concat(this._doubleLine(e[a-1][0],e[a-1][1],e[0][0],e[0][1],n))),{type:"path",ops:s}}return 2===a?this.line(e[0][0],e[0][1],e[1][0],e[1][1],n):void 0}},{key:"polygon",value:function(e,t){return this.linearPath(e,!0,t)}},{key:"rectangle",value:function(e,t,n,a,s){return this.polygon([[e,t],[e+n,t],[e+n,t+a],[e,t+a]],s)}},{key:"curve",value:function(e,t){var n=this._curveWithOffset(e,1*(1+.2*t.roughness),t),a=this._curveWithOffset(e,1.5*(1+.22*t.roughness),t);return{type:"path",ops:n.concat(a)}}},{key:"ellipse",value:function(e,t,n,a,s){var o=2*i/s.curveStepCount,l=p(n/2),r=p(a/2);l+=this._getOffset(.05*-l,.05*l,s),r+=this._getOffset(.05*-r,.05*r,s);var f=this._ellipse(o,e,t,l,r,1,o*this._getOffset(.1,this._getOffset(.4,1,s),s),s),d=this._ellipse(o,e,t,l,r,1.5,0,s);return{type:"path",ops:f.concat(d)}}},{key:"arc",value:function(e,t,s,l,f,d,g,h,_){var o=e,u=t,y=p(s/2),c=p(l/2);y+=this._getOffset(.01*-y,.01*y,_),c+=this._getOffset(.01*-c,.01*c,_);for(var x=f,v=d;0>x;)x+=2*i,v+=2*i;v-x>2*i&&(x=0,v=2*i);var m=2*i/_.curveStepCount,k=r(m/2,(v-x)/2),O=this._arc(k,o,u,y,c,x,v,1,_),S=this._arc(k,o,u,y,c,x,v,1.5,_),R=O.concat(S);return g&&(h?(R=R.concat(this._doubleLine(o,u,o+y*n(x),u+c*a(x),_)),R=R.concat(this._doubleLine(o,u,o+y*n(v),u+c*a(v),_))):(R.push({op:"lineTo",data:[o,u]}),R.push({op:"lineTo",data:[o+y*n(x),u+c*a(x)]}))),{type:"path",ops:R}}},{key:"hachureFillArc",value:function(e,t,s,l,r,f,d){var o=e,g=t,h=p(s/2),_=p(l/2);h+=this._getOffset(.01*-h,.01*h,d),_+=this._getOffset(.01*-_,.01*_,d);for(var u=r,y=f;0>u;)u+=2*i,y+=2*i;y-u>2*i&&(u=0,y=2*i);for(var c=(y-u)/d.curveStepCount,x=[],v=[],m=u;m<=y;m+=c)x.push(o+h*n(m)),v.push(g+_*a(m));return x.push(o+h*n(y)),v.push(g+_*a(y)),x.push(o),v.push(g),this.hachureFillShape(x,v,d)}},{key:"solidFillShape",value:function(e,t,n){var a=[];if(e&&t&&e.length&&t.length&&e.length===t.length){var s=n.maxRandomnessOffset||0,o=e.length;if(2<o){a.push({op:"move",data:[e[0]+this._getOffset(-s,s,n),t[0]+this._getOffset(-s,s,n)]});for(var l=1;l<o;l++)a.push({op:"lineTo",data:[e[l]+this._getOffset(-s,s,n),t[l]+this._getOffset(-s,s,n)]})}}return{type:"fillPath",ops:a}}},{key:"hachureFillShape",value:function(e,t,l){var o=[];if(e&&t&&e.length&&t.length){for(var p=e[0],f=e[0],d=t[0],g=t[0],u=1;u<e.length;u++)p=r(p,e[u]),f=s(f,e[u]),d=r(d,t[u]),g=s(g,t[u]);var y=l.hachureAngle,c=l.hachureGap;0>c&&(c=4*l.strokeWidth),c=s(c,.1);for(var x,v=y%180*(i/180),m=n(v),k=a(v),O=_(v),S=new h(d-1,g+1,p-1,f+1,c,k,m,O);null!=(x=S.getNextLine());)for(var R=this._getIntersectingLines(x,e,t),T=0;T<R.length;T++)if(T<R.length-1){var P=R[T],b=R[T+1];o=o.concat(this._doubleLine(P[0],P[1],b[0],b[1],l))}}return{type:"path",ops:o}}},{key:"hachureFillEllipse",value:function(e,t,n,a,s){var o=[],r=p(n/2),f=p(a/2);r+=this._getOffset(.05*-r,.05*r,s),f+=this._getOffset(.05*-f,.05*f,s);var d=s.hachureAngle,g=s.hachureGap;0>=g&&(g=4*s.strokeWidth);var h=s.fillWeight;0>h&&(h=s.strokeWidth/2);for(var u=_(d%180*(i/180)),y=f/r,c=l(y*u*y*u+1),x=y*u/c,v=1/c,m=g/(r*f/l(f*v*(f*v)+r*x*(r*x))/r),k=l(r*r-(e-r+m)*(e-r+m)),O=e-r+m;O<e+r;O+=m){k=l(r*r-(e-O)*(e-O));var S=this._affine(O,t-k,e,t,x,v,y),R=this._affine(O,t+k,e,t,x,v,y);o=o.concat(this._doubleLine(S[0],S[1],R[0],R[1],s))}return{type:"path",ops:o}}},{key:"svgPath",value:function(e,t){e=(e||"").replace(/\n/g," ").replace(/(-)/g," -").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");var n=new y(e);if(t.simplification){var a=new x(n.linearPoints,n.closed),o=a.fit(t.simplification);n=new y(o)}for(var l=[],r=n.segments||[],p=0;p<r.length;p++){var i=r[p],s=0<p?r[p-1]:null,f=this._processSegment(n,i,s,t);f&&f.length&&(l=l.concat(f))}return{type:"path",ops:l}}},{key:"_bezierTo",value:function(e,t,n,a,s,l,r,p){for(var o=[],d=[p.maxRandomnessOffset||1,(p.maxRandomnessOffset||1)+.5],g=null,f=0;2>f;f++)0===f?o.push({op:"move",data:[r.x,r.y]}):o.push({op:"move",data:[r.x+this._getOffset(-d[0],d[0],p),r.y+this._getOffset(-d[0],d[0],p)]}),g=[s+this._getOffset(-d[f],d[f],p),l+this._getOffset(-d[f],d[f],p)],o.push({op:"bcurveTo",data:[e+this._getOffset(-d[f],d[f],p),t+this._getOffset(-d[f],d[f],p),n+this._getOffset(-d[f],d[f],p),a+this._getOffset(-d[f],d[f],p),g[0],g[1]]});return r.setPosition(g[0],g[1]),o}},{key:"_processSegment",value:function(e,t,n,a){var s=[];switch(t.key){case"M":case"m":{var o="m"===t.key;if(2<=t.data.length){var l=+t.data[0],r=+t.data[1];o&&(l+=e.x,r+=e.y);var p=1*(a.maxRandomnessOffset||0);l+=this._getOffset(-p,p,a),r+=this._getOffset(-p,p,a),e.setPosition(l,r),s.push({op:"move",data:[l,r]})}break}case"L":case"l":{var d="l"===t.key;if(2<=t.data.length){var g=+t.data[0],h=+t.data[1];d&&(g+=e.x,h+=e.y),s=s.concat(this._doubleLine(e.x,e.y,g,h,a)),e.setPosition(g,h)}break}case"H":case"h":{var _="h"===t.key;if(t.data.length){var u=+t.data[0];_&&(u+=e.x),s=s.concat(this._doubleLine(e.x,e.y,u,e.y,a)),e.setPosition(u,e.y)}break}case"V":case"v":{var y="v"===t.key;if(t.data.length){var x=+t.data[0];y&&(x+=e.y),s=s.concat(this._doubleLine(e.x,e.y,e.x,x,a)),e.setPosition(e.x,x)}break}case"Z":case"z":{e.first&&(s=s.concat(this._doubleLine(e.x,e.y,e.first[0],e.first[1],a)),e.setPosition(e.first[0],e.first[1]),e.first=null);break}case"C":case"c":{var v="c"===t.key;if(6<=t.data.length){var m=+t.data[0],k=+t.data[1],O=+t.data[2],S=+t.data[3],R=+t.data[4],T=+t.data[5];v&&(m+=e.x,O+=e.x,R+=e.x,k+=e.y,S+=e.y,T+=e.y);var P=this._bezierTo(m,k,O,S,R,T,e,a);s=s.concat(P),e.bezierReflectionPoint=[R+(R-O),T+(T-S)]}break}case"S":case"s":{var b="s"===t.key;if(4<=t.data.length){var E=+t.data[0],C=+t.data[1],A=+t.data[2],w=+t.data[3];b&&(E+=e.x,A+=e.x,C+=e.y,w+=e.y);var L=E,N=C,I=n?n.key:"",M=null;("c"==I||"C"==I||"s"==I||"S"==I)&&(M=e.bezierReflectionPoint),M&&(L=M[0],N=M[1]);var z=this._bezierTo(L,N,E,C,A,w,e,a);s=s.concat(z),e.bezierReflectionPoint=[A+(A-E),w+(w-C)]}break}case"Q":case"q":{var q="q"===t.key;if(4<=t.data.length){var F=+t.data[0],D=+t.data[1],W=+t.data[2],U=+t.data[3];q&&(F+=e.x,W+=e.x,D+=e.y,U+=e.y);var B=1*(1+.2*a.roughness),X=1.5*(1+.22*a.roughness);s.push({op:"move",data:[e.x+this._getOffset(-B,B,a),e.y+this._getOffset(-B,B,a)]});var V=[W+this._getOffset(-B,B,a),U+this._getOffset(-B,B,a)];s.push({op:"qcurveTo",data:[F+this._getOffset(-B,B,a),D+this._getOffset(-B,B,a),V[0],V[1]]}),s.push({op:"move",data:[e.x+this._getOffset(-X,X,a),e.y+this._getOffset(-X,X,a)]}),V=[W+this._getOffset(-X,X,a),U+this._getOffset(-X,X,a)],s.push({op:"qcurveTo",data:[F+this._getOffset(-X,X,a),D+this._getOffset(-X,X,a),V[0],V[1]]}),e.setPosition(V[0],V[1]),e.quadReflectionPoint=[W+(W-F),U+(U-D)]}break}case"T":case"t":{var f="t"===t.key;if(2<=t.data.length){var G=+t.data[0],H=+t.data[1];f&&(G+=e.x,H+=e.y);var $=G,Q=H,Z=n?n.key:"",M=null;("q"==Z||"Q"==Z||"t"==Z||"T"==Z)&&(M=e.quadReflectionPoint),M&&($=M[0],Q=M[1]);var j=1*(1+.2*a.roughness),K=1.5*(1+.22*a.roughness);s.push({op:"move",data:[e.x+this._getOffset(-j,j,a),e.y+this._getOffset(-j,j,a)]});var Y=[G+this._getOffset(-j,j,a),H+this._getOffset(-j,j,a)];s.push({op:"qcurveTo",data:[$+this._getOffset(-j,j,a),Q+this._getOffset(-j,j,a),Y[0],Y[1]]}),s.push({op:"move",data:[e.x+this._getOffset(-K,K,a),e.y+this._getOffset(-K,K,a)]}),Y=[G+this._getOffset(-K,K,a),H+this._getOffset(-K,K,a)],s.push({op:"qcurveTo",data:[$+this._getOffset(-K,K,a),Q+this._getOffset(-K,K,a),Y[0],Y[1]]}),e.setPosition(Y[0],Y[1]),e.quadReflectionPoint=[G+(G-$),H+(H-Q)]}break}case"A":case"a":{var J="a"===t.key;if(7<=t.data.length){var ee=+t.data[0],te=+t.data[1],ne=+t.data[2],ae=+t.data[3],se=+t.data[4],ie=+t.data[5],oe=+t.data[6];if(J&&(ie+=e.x,oe+=e.y),ie==e.x&&oe==e.y)break;if(0==ee||0==te)s=s.concat(this._doubleLine(e.x,e.y,ie,oe,a)),e.setPosition(ie,oe);else for(var le=a.maxRandomnessOffset||0,re=0;1>re;re++)for(var i,pe=new c([e.x,e.y],[ie,oe],[ee,te],ne,!!ae,!!se),fe=pe.getNextSegment();fe;)i=this._bezierTo(fe.cp1[0],fe.cp1[1],fe.cp2[0],fe.cp2[1],fe.to[0],fe.to[1],e,a),s=s.concat(i),fe=pe.getNextSegment()}break}default:}return s}},{key:"_getOffset",value:function(e,t,n){return n.roughness*(Math.random()*(t-e)+e)}},{key:"_affine",value:function(e,t,n,a,s,i,o){return[-n*i-a*s+n+i*e+s*t,o*(n*s-a*i)+a+-o*s*e+o*i*t]}},{key:"_doubleLine",value:function(e,t,n,a,s){var i=this._line(e,t,n,a,s,!0,!1),o=this._line(e,t,n,a,s,!0,!0);return i.concat(o)}},{key:"_line",value:function(e,n,a,s,i,o,r){var p=t(e-a,2)+t(n-s,2),f=i.maxRandomnessOffset||0;100*(f*f)>p&&(f=l(p)/10);var d=f/2,g=.2+.2*Math.random(),h=i.bowing*i.maxRandomnessOffset*(s-n)/200,_=i.bowing*i.maxRandomnessOffset*a/200;h=this._getOffset(-h,h,i),_=this._getOffset(-_,_,i);var u=[];return o&&(r?u.push({op:"move",data:[e+this._getOffset(-d,d,i),n+this._getOffset(-d,d,i)]}):u.push({op:"move",data:[e+this._getOffset(-f,f,i),n+this._getOffset(-f,f,i)]})),r?u.push({op:"bcurveTo",data:[h+e+(a-e)*g+this._getOffset(-d,d,i),_+n+(s-n)*g+this._getOffset(-d,d,i),h+e+2*(a-e)*g+this._getOffset(-d,d,i),_+n+2*(s-n)*g+this._getOffset(-d,d,i),a+this._getOffset(-d,d,i),s+this._getOffset(-d,d,i)]}):u.push({op:"bcurveTo",data:[h+e+(a-e)*g+this._getOffset(-f,f,i),_+n+(s-n)*g+this._getOffset(-f,f,i),h+e+2*(a-e)*g+this._getOffset(-f,f,i),_+n+2*(s-n)*g+this._getOffset(-f,f,i),a+this._getOffset(-f,f,i),s+this._getOffset(-f,f,i)]}),u}},{key:"_curve",value:function(e,t,n){var a=e.length,o=[];if(3<a){var l=[],r=1-n.curveTightness;o.push({op:"move",data:[e[1][0],e[1][1]]});for(var s,p=1;p+2<a;p++)s=e[p],l[0]=[s[0],s[1]],l[1]=[s[0]+(r*e[p+1][0]-r*e[p-1][0])/6,s[1]+(r*e[p+1][1]-r*e[p-1][1])/6],l[2]=[e[p+1][0]+(r*e[p][0]-r*e[p+2][0])/6,e[p+1][1]+(r*e[p][1]-r*e[p+2][1])/6],l[3]=[e[p+1][0],e[p+1][1]],o.push({op:"bcurveTo",data:[l[1][0],l[1][1],l[2][0],l[2][1],l[3][0],l[3][1]]});if(t&&2===t.length){var i=n.maxRandomnessOffset;o.push({ops:"lineTo",data:[t[0]+this._getOffset(-i,i,n),t[1]+ +this._getOffset(-i,i,n)]})}}else 3===a?(o.push({op:"move",data:[e[1][0],e[1][1]]}),o.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):2===a&&(o=o.concat(this._doubleLine(e[0][0],e[0][1],e[1][0],e[1][1],n)));return o}},{key:"_ellipse",value:function(e,t,s,l,r,p,f,d){var o=this._getOffset(-.5,.5,d)-i/2,g=[];g.push([this._getOffset(-p,p,d)+t+.9*l*n(o-e),this._getOffset(-p,p,d)+s+.9*r*a(o-e)]);for(var h=o;h<2*i+o-.01;h+=e)g.push([this._getOffset(-p,p,d)+t+l*n(h),this._getOffset(-p,p,d)+s+r*a(h)]);return g.push([this._getOffset(-p,p,d)+t+l*n(o+2*i+.5*f),this._getOffset(-p,p,d)+s+r*a(o+2*i+.5*f)]),g.push([this._getOffset(-p,p,d)+t+.98*l*n(o+f),this._getOffset(-p,p,d)+s+.98*r*a(o+f)]),g.push([this._getOffset(-p,p,d)+t+.9*l*n(o+.5*f),this._getOffset(-p,p,d)+s+.9*r*a(o+.5*f)]),this._curve(g,null,d)}},{key:"_curveWithOffset",value:function(e,t,n){for(var a=[[e[0][0]+this._getOffset(-t,t,n),e[0][1]+this._getOffset(-t,t,n)],[e[0][0]+this._getOffset(-t,t,n),e[0][1]+this._getOffset(-t,t,n)]],s=1;s<e.length;s++)a.push([e[s][0]+this._getOffset(-t,t,n),e[s][1]+this._getOffset(-t,t,n)]),s===e.length-1&&a.push([e[s][0]+this._getOffset(-t,t,n),e[s][1]+this._getOffset(-t,t,n)]);return this._curve(a,null,n)}},{key:"_arc",value:function(e,t,s,i,l,r,p,f,d){var o=r+this._getOffset(-.1,.1,d),g=[];g.push([this._getOffset(-f,f,d)+t+.9*i*n(o-e),this._getOffset(-f,f,d)+s+.9*l*a(o-e)]);for(var h=o;h<=p;h+=e)g.push([this._getOffset(-f,f,d)+t+i*n(h),this._getOffset(-f,f,d)+s+l*a(h)]);return g.push([t+i*n(p),s+l*a(p)]),g.push([t+i*n(p),s+l*a(p)]),this._curve(g,null,d)}},{key:"_getIntersectingLines",value:function(t,n,a){for(var s,o=[],l=new g(t[0],t[1],t[2],t[3]),r=0;r<n.length;r++)s=new g(n[r],a[r],n[(r+1)%n.length],a[(r+1)%n.length]),l.compare(s)==e().INTERSECTS&&o.push([l.xi,l.yi]);return o}}]),o}();self._roughScript=self.document&&self.document.currentScript&&self.document.currentScript.src;var m=function(){function e(t,n){f(this,e),this.config=n||{},this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveStepCount:9,fill:null,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1},this.config.options&&(this.defaultOptions=this._options(this.config.options))}return d(e,[{key:"lib",value:function(){var e=o(regeneratorRuntime.mark(function e(){var t,n,a,s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._renderer||(window.workly&&!this.config.noWorker?(t=Function.prototype.toString,n=this.config.worklyURL||"https://cdn.jsdelivr.net/gh/pshihn/workly/dist/workly.min.js",a=this.config.roughURL||self._roughScript,a&&n?(s="importScripts('"+n+"', '"+a+"');\nworkly.expose(self.rough.createRenderer());",i=URL.createObjectURL(new Blob([s])),this._renderer=workly.proxy(i)):this._renderer=new v):this._renderer=new v),e.abrupt("return",this._renderer);case 2:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"line",value:function(){var e=o(regeneratorRuntime.mark(function e(t,n,a,s,i){var l,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=this._options(i),e.next=3,this.lib();case 3:return o=e.sent,e.next=6,o.line(t,n,a,s,l);case 6:r=e.sent,this._draw(this.ctx,r,l);case 8:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"rectangle",value:function(){var e=o(regeneratorRuntime.mark(function e(t,n,a,s,i){var l,o,r,p,f,d,g,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=this._options(i),e.next=3,this.lib();case 3:if(o=e.sent,!l.fill){e.next=19;break}if(r=this.ctx,p=[t,t+a,t+a,t],f=[n,n,n+s,n+s],"solid"!==l.fillStyle){e.next=15;break}return e.next=11,o.solidFillShape(p,f,l);case 11:d=e.sent,this._fill(r,d,l),e.next=19;break;case 15:return e.next=17,o.hachureFillShape(p,f,l);case 17:g=e.sent,this._fillSketch(r,g,l);case 19:return e.next=21,o.rectangle(t,n,a,s,l);case 21:h=e.sent,this._draw(this.ctx,h,l);case 23:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"ellipse",value:function(){var e=o(regeneratorRuntime.mark(function e(t,n,a,s,i){var l,o,r,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=this._options(i),e.next=3,this.lib();case 3:if(o=e.sent,!l.fill){e.next=16;break}if("solid"!==l.fillStyle){e.next=12;break}return e.next=8,o.ellipse(t,n,a,s,l);case 8:r=e.sent,this._fill(this.ctx,r,l),e.next=16;break;case 12:return e.next=14,o.hachureFillEllipse(t,n,a,s,l);case 14:p=e.sent,this._fillSketch(this.ctx,p,l);case 16:return e.next=18,o.ellipse(t,n,a,s,l);case 18:f=e.sent,this._draw(this.ctx,f,l);case 20:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"circle",value:function(){var e=o(regeneratorRuntime.mark(function e(t,n,a,s){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ellipse(t,n,a,a,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"linearPath",value:function(){var e=o(regeneratorRuntime.mark(function e(t,n){var a,s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._options(n),e.next=3,this.lib();case 3:return s=e.sent,e.next=6,s.linearPath(t,!1,a);case 6:i=e.sent,this._draw(this.ctx,i,a);case 8:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"polygon",value:function(){var e=o(regeneratorRuntime.mark(function e(t,n){var a,s,i,o,l,r,f,d,g,h,p,_,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._options(n),e.next=3,this.lib();case 3:if(s=e.sent,!a.fill){e.next=36;break}for(i=[],o=[],l=!0,r=!1,f=void 0,e.prev=9,d=t[Symbol.iterator]();!(l=(g=d.next()).done);l=!0)h=g.value,i.push(h[0]),o.push(h[1]);e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](9),r=!0,f=e.t0;case 17:e.prev=17,e.prev=18,!l&&d.return&&d.return();case 20:if(e.prev=20,!r){e.next=23;break}throw f;case 23:return e.finish(20);case 24:return e.finish(17);case 25:if("solid"!==a.fillStyle){e.next=32;break}return e.next=28,s.solidFillShape(i,o,a);case 28:p=e.sent,this._fill(this.ctx,p,a),e.next=36;break;case 32:return e.next=34,s.hachureFillShape(i,o,a);case 34:_=e.sent,this._fillSketch(this.ctx,_,a);case 36:return e.next=38,s.linearPath(t,!0,a);case 38:u=e.sent,this._draw(this.ctx,u,a);case 40:case"end":return e.stop();}},e,this,[[9,13,17,25],[18,,20,24]])}));return function(){return e.apply(this,arguments)}}()},{key:"arc",value:function(){var e=o(regeneratorRuntime.mark(function e(t,n,a,s,i,l,r,p){var f,o,d,g,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f=this._options(p),e.next=3,this.lib();case 3:if(o=e.sent,!(r&&f.fill)){e.next=16;break}if("solid"!==f.fillStyle){e.next=12;break}return e.next=8,o.arc(t,n,a,s,i,l,!0,!1,f);case 8:d=e.sent,this._fill(this.ctx,d,f),e.next=16;break;case 12:return e.next=14,o.hachureFillArc(t,n,a,s,i,l,f);case 14:g=e.sent,this._fillSketch(this.ctx,g,f);case 16:return e.next=18,o.arc(t,n,a,s,i,l,r,!0,f);case 18:h=e.sent,this._draw(this.ctx,h,f);case 20:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"curve",value:function(){var e=o(regeneratorRuntime.mark(function e(t,n){var a,s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._options(n),e.next=3,this.lib();case 3:return s=e.sent,e.next=6,s.curve(t,a);case 6:i=e.sent,this._draw(this.ctx,i,a);case 8:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"path",value:function(){var e=o(regeneratorRuntime.mark(function e(t,n){var a,s,i,o,l,p,f,d,g,h,_,u,y,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=this._options(n),e.next=5,this.lib();case 5:if(s=e.sent,!a.fill){e.next=34;break}if("solid"!==a.fillStyle){e.next=15;break}this.ctx.save(),this.ctx.fillStyle=a.fill,i=new Path2D(t),this.ctx.fill(i),this.ctx.restore(),e.next=34;break;case 15:o=[0,0];try{l="http://www.w3.org/2000/svg",p=document.createElementNS(l,"svg"),p.setAttribute("width","0"),p.setAttribute("height","0"),f=document.createElementNS(l,"path"),f.setAttribute("d",t),p.appendChild(f),document.body.appendChild(p),d=f.getBBox(),d&&(o[0]=d.width||0,o[1]=d.height||0),document.body.removeChild(p)}catch(e){}return o[0]*o[1]||(o=[this.canvas.width||100,this.canvas.height||100]),o[0]=r(4*o[0],this.canvas.width),o[1]=r(4*o[1],this.canvas.height),g=[0,o[0],o[0],0],h=[0,0,o[1],o[1]],e.next=24,s.hachureFillShape(g,h,a);case 24:_=e.sent,u=document.createElement("canvas"),u.width=o[0],u.height=o[1],this._fillSketch(u.getContext("2d"),_,a),this.ctx.save(),this.ctx.fillStyle=this.ctx.createPattern(u,"repeat"),y=new Path2D(t),this.ctx.fill(y),this.ctx.restore();case 34:return e.next=36,s.svgPath(t,a);case 36:c=e.sent,this._draw(this.ctx,c,a);case 38:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_options",value:function(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}},{key:"_draw",value:function(e,t,n){e.save(),e.strokeStyle=n.stroke,e.lineWidth=n.strokeWidth,this._drawToContext(e,t),e.restore()}},{key:"_fillSketch",value:function(e,t,n){var a=n.fillWeight;0>a&&(a=n.strokeWidth/2),e.save(),e.strokeStyle=n.fill,e.lineWidth=a,this._drawToContext(e,t),e.restore()}},{key:"_fill",value:function(e,t,n){e.save(),e.fillStyle=n.fill,t.type="fillPath",this._drawToContext(e,t,n),e.restore()}},{key:"_drawToContext",value:function(e,t){if("path"===t.type||"fillPath"===t.type){e.beginPath();var n,a=!0,s=!1;try{for(var i,o=t.ops[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value,r=l.data;switch(l.op){case"move":e.moveTo(r[0],r[1]);break;case"bcurveTo":e.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"qcurveTo":e.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"lineTo":e.lineTo(r[0],r[1]);}}}catch(e){s=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(s)throw n}}"fillPath"===t.type?e.fill():e.stroke()}}}],[{key:"createRenderer",value:function(){return new v}}]),e}();return{canvas:function(e,t){return new m(e,t)},createRenderer:function(){return m.createRenderer()}}}();